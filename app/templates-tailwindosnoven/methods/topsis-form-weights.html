{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h1 class="mb-4 text-center">Topsis</h1>
    <div class="form-step">
        <ul>
            <li class="step-focus">Step 1</li>
            <li >Step 2</li>
            <li >Step 3</li>
        </ul>
    </div>
    <h2>Define Criteria Weights for TOPSIS</h2>
    <form method="POST">
        {% for criteria in criterias %}
        <div class="mb-3">
            <label for="{{ criteria }}" class="form-label">{{ criteria.replace('_', ' ').capitalize() }}</label>
            <input type="number" step="0.01" name="{{ criteria }}" id="{{ criteria }}" class="form-control"
                value="{{ weights.get(criteria, '') }}" required>
        </div>
        {% endfor %}
        <div class="mb-3">
            <label><strong>Current Total:</strong></label>
            <span id="current-total">0.00</span>
        </div>
        <button type="submit" class="btn btn-primary">Normalize and Nest step</button>
    </form>
</div>


<script>
    document.querySelectorAll("input[type='number']").forEach(input => {
        input.addEventListener("input", () => {
            let total = 0;
            document.querySelectorAll("input[type='number']").forEach(input => {
                total += parseFloat(input.value) || 0;
            });
            document.getElementById("current-total").textContent = total.toFixed(2);
        });
    });
</script>
{% endblock %}
