{% extends "base.html" %}

{% block content %}
<h2>Define Criteria for AHP for group {{group}}</h2>
<form method="POST">
    <!-- Skriti input za izbrano skupino -->
    <input type="hidden" name="group" value="{{ group }}">

    <!-- Fields for criteria -->
    <div class="mb-3">
        <label for="revenue" class="form-label">Revenue</label>
        <input type="number" step="0.01" name="revenue" id="revenue" class="form-control" required>
    </div>
    <div class="mb-3">
        <label for="revenue_percent_change" class="form-label">Revenue Percent Change</label>
        <input type="number" step="0.01" name="revenue_percent_change" id="revenue_percent_change" class="form-control">
    </div>
    <div class="mb-3">
        <label for="profit" class="form-label">Profit</label>
        <input type="number" step="0.01" name="profit" id="profit" class="form-control" required>
    </div>
    <div class="mb-3">
        <label for="profits_percent_change" class="form-label">Profits Percent Change</label>
        <input type="number" step="0.01" name="profits_percent_change" id="profits_percent_change" class="form-control">
    </div>
    <div class="mb-3">
        <label for="employees" class="form-label">Employees</label>
        <input type="number" step="0.01" name="employees" id="employees" class="form-control" required>
    </div>
    <div class="mb-3">
        <label for="assets" class="form-label">Assets</label>
        <input type="number" step="0.01" name="assets" id="assets" class="form-control" required>
    </div>


    <div class="mb-3">
        <label for="change_in_rank" class="form-label">Change in Rank</label>
        <input type="number" step="1" name="change_in_rank" id="change_in_rank" class="form-control">
    </div>
    <button type="submit" class="btn btn-primary">Calculate</button>
</form>
{% endblock %}

<script>
    document.querySelector("form").addEventListener("submit", function(event) {
        let totalWeight = 0;
        let inputs = document.querySelectorAll("input[type='number']");
        inputs.forEach(input => {
            let value = parseFloat(input.value);
            if (isNaN(value) || value < 0) {
                alert("Please enter valid positive numbers for all criteria.");
                event.preventDefault();
            } else {
                totalWeight += value;
            }
        });
        if (totalWeight <= 0) {
            alert("Total weight must be greater than 0.");
            event.preventDefault();
        }
    });
</script>
